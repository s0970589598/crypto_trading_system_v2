# äº¤æ˜“æ•¸é‡é¡¯ç¤ºå•é¡Œè§£æ±ºèªªæ˜

## å•é¡Œæè¿°

åœ¨äº¤æ˜“è¦†ç›¤é é¢çœ‹ä¸åˆ°æ–°å¢çš„äº¤æ˜“æ•¸é‡ã€æ§“æ¡¿ç­‰ä¿¡æ¯ã€‚

---

## å•é¡ŒåŸå› 

### æ ¹æœ¬åŸå› 
è©•åˆ†è¨˜éŒ„ï¼ˆ`quality_scores.json`ï¼‰ä¸­æ²’æœ‰ä¿å­˜ `quantity`ã€`leverage` ç­‰å­—æ®µã€‚

### è©³ç´°èªªæ˜

1. **é¡¯ç¤ºä»£ç¢¼å·²æ­£ç¢ºä¿®æ”¹**
   - äº¤æ˜“è©³ç´°ä¿¡æ¯çš„é¡¯ç¤ºä»£ç¢¼å·²ç¶“æ·»åŠ äº†æ•¸é‡ã€æ§“æ¡¿ã€ç›ˆè™§%çš„é¡¯ç¤º
   - ä»£ç¢¼é‚è¼¯æ­£ç¢º

2. **æ•¸æ“šä¾†æºå•é¡Œ**
   - é¡¯ç¤ºçš„æ•¸æ“šä¾†è‡ª `quality_scores.json`
   - èˆŠçš„è©•åˆ†è¨˜éŒ„ä¸­æ²’æœ‰é€™äº›å­—æ®µ
   - éœ€è¦é‡æ–°è©•åˆ†æ‰èƒ½çœ‹åˆ°æ–°å­—æ®µ

---

## è§£æ±ºæ–¹æ¡ˆ

### å·²å®Œæˆçš„ä¿®æ”¹

**1. é¡¯ç¤ºä»£ç¢¼å„ªåŒ–**ï¼ˆå·²å®Œæˆï¼‰
- æ·»åŠ äº†æ•¸é‡ã€æ§“æ¡¿ã€ç›ˆè™§%çš„é¡¯ç¤º
- ä½¿ç”¨é›™è¡Œä½ˆå±€ï¼Œæ›´æ¸…æ™°

**2. è©•åˆ†è¨˜éŒ„ä¿å­˜å„ªåŒ–**ï¼ˆå·²å®Œæˆï¼‰
- åœ¨è‡ªå‹•è©•åˆ†æ™‚ä¿å­˜ä»¥ä¸‹æ–°å­—æ®µï¼š
  - `quantity`ï¼šäº¤æ˜“æ•¸é‡
  - `leverage`ï¼šæ§“æ¡¿å€æ•¸
  - `fee`ï¼šæ‰‹çºŒè²»
  - `close_type`ï¼šå¹³å€‰é¡å‹

### éœ€è¦åŸ·è¡Œçš„æ“ä½œ

**é‡æ–°è©•åˆ†æ‰€æœ‰äº¤æ˜“**

ç”±æ–¼èˆŠçš„è©•åˆ†è¨˜éŒ„ä¸­æ²’æœ‰é€™äº›å­—æ®µï¼Œä½ éœ€è¦é‡æ–°è©•åˆ†æ‰èƒ½çœ‹åˆ°æ–°ä¿¡æ¯ã€‚

---

## æ“ä½œæ­¥é©Ÿ

### æ–¹æ³• 1ï¼šé‡æ–°è‡ªå‹•è©•åˆ†ï¼ˆæ¨è–¦ï¼‰

1. **å•Ÿå‹• Web ç•Œé¢**
   ```bash
   ./å•Ÿå‹•Webç•Œé¢v2.sh
   ```

2. **é€²å…¥äº¤æ˜“è¦†ç›¤é é¢**
   - é»æ“Šã€Œäº¤æ˜“è¦†ç›¤ã€

3. **é¸æ“‡è¦é‡æ–°è©•åˆ†çš„äº¤æ˜“**
   - å¯ä»¥é¸æ“‡å…¨éƒ¨æˆ–éƒ¨åˆ†äº¤æ˜“
   - å»ºè­°é¸æ“‡ã€Œå…¨éƒ¨ã€

4. **é»æ“Šã€Œè‡ªå‹•è©•åˆ†ã€æŒ‰éˆ•**
   - ç³»çµ±æœƒé‡æ–°è©•åˆ†ä¸¦ä¿å­˜æ–°å­—æ®µ
   - ç­‰å¾…è©•åˆ†å®Œæˆ

5. **æŸ¥çœ‹çµæœ**
   - é»æ“Šã€ŒğŸ” æŸ¥çœ‹ã€æŸ¥çœ‹äº¤æ˜“è©³ç´°ä¿¡æ¯
   - ç¾åœ¨æ‡‰è©²èƒ½çœ‹åˆ°æ•¸é‡ã€æ§“æ¡¿ã€ç›ˆè™§%ç­‰ä¿¡æ¯

---

### æ–¹æ³• 2ï¼šæ¸…é™¤èˆŠè©•åˆ†å¾Œé‡æ–°è©•åˆ†

å¦‚æœæƒ³å®Œå…¨é‡æ–°é–‹å§‹ï¼š

1. **å‚™ä»½ç¾æœ‰è©•åˆ†**ï¼ˆå¯é¸ï¼‰
   ```bash
   cp data/review_history/quality_scores.json data/review_history/quality_scores_backup.json
   ```

2. **æ¸…é™¤è©•åˆ†**
   - åœ¨äº¤æ˜“è¦†ç›¤é é¢é»æ“Šã€ŒğŸ—‘ï¸ æ¸…é™¤å…¨éƒ¨è©•åˆ†ã€
   - æˆ–ä½¿ç”¨è…³æœ¬ï¼š
     ```bash
     python æ¸…é™¤å…¨éƒ¨è©•åˆ†.py
     ```

3. **é‡æ–°è©•åˆ†**
   - æŒ‰ç…§æ–¹æ³• 1 çš„æ­¥é©Ÿé‡æ–°è©•åˆ†

---

## æ–°å¢å­—æ®µèªªæ˜

### ä¿å­˜åˆ° quality_scores.json çš„æ–°å­—æ®µ

```json
{
  "trade_id": "xxx",
  "quantity": 0.05,        // æ–°å¢ï¼šäº¤æ˜“æ•¸é‡
  "leverage": 20.0,        // æ–°å¢ï¼šæ§“æ¡¿å€æ•¸
  "fee": 0.15,            // æ–°å¢ï¼šæ‰‹çºŒè²»
  "close_type": "æ­¢ç›ˆ",   // æ–°å¢ï¼šå¹³å€‰é¡å‹
  "entry_price": 42150.50,
  "exit_price": 42850.75,
  // ... å…¶ä»–å­—æ®µ
}
```

### é¡¯ç¤ºæ•ˆæœ

**ç¬¬ä¸€è¡Œ**ï¼š
- äº¤æ˜“å°ï¼šBTCUSDT
- æ–¹å‘ï¼šLong
- **æ•¸é‡ï¼š0.0500**ï¼ˆæ–°å¢ï¼‰
- **æ§“æ¡¿ï¼š20x**ï¼ˆæ–°å¢ï¼‰

**ç¬¬äºŒè¡Œ**ï¼š
- ç›ˆè™§ï¼š+125.50 USDT
- **ç›ˆè™§%ï¼š+2.50%**ï¼ˆæ–°å¢ï¼Œè‡ªå‹•è¨ˆç®—ï¼‰
- ç¸½åˆ†ï¼š85/100
- è©•åˆ†æ–¹å¼ï¼šğŸ¤– è‡ªå‹•

---

## é©—è­‰æ–¹æ³•

### 1. æª¢æŸ¥ JSON æ–‡ä»¶

æ‰“é–‹ `data/review_history/quality_scores.json`ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰æ–°å­—æ®µï¼š

```bash
# æŸ¥çœ‹ç¬¬ä¸€ç­†è¨˜éŒ„
head -50 data/review_history/quality_scores.json
```

æ‡‰è©²èƒ½çœ‹åˆ°ï¼š
```json
{
  "quantity": 0.05,
  "leverage": 20.0,
  "fee": 0.15,
  "close_type": "æ­¢ç›ˆ"
}
```

### 2. æª¢æŸ¥ Web ç•Œé¢

1. é€²å…¥äº¤æ˜“è¦†ç›¤é é¢
2. é»æ“Šã€ŒğŸ” æŸ¥çœ‹ã€æŸ¥çœ‹ä»»æ„ä¸€ç­†äº¤æ˜“
3. åœ¨ã€ŒğŸ“Š äº¤æ˜“è©³ç´°ä¿¡æ¯ã€ä¸­æ‡‰è©²èƒ½çœ‹åˆ°ï¼š
   - ç¬¬ä¸€è¡Œï¼šäº¤æ˜“å°ã€æ–¹å‘ã€**æ•¸é‡**ã€**æ§“æ¡¿**
   - ç¬¬äºŒè¡Œï¼šç›ˆè™§(USDT)ã€**ç›ˆè™§(%)**ã€ç¸½åˆ†ã€è©•åˆ†æ–¹å¼

---

## å¸¸è¦‹å•é¡Œ

### Q1ï¼šé‡æ–°è©•åˆ†å¾Œé‚„æ˜¯çœ‹ä¸åˆ°ï¼Ÿ
**A**ï¼š
1. ç¢ºèªå·²ç¶“é‡æ–°å•Ÿå‹• Web ç•Œé¢
2. æª¢æŸ¥ç€è¦½å™¨ç·©å­˜ï¼Œå˜—è©¦å¼·åˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
3. æª¢æŸ¥ `quality_scores.json` æ˜¯å¦æœ‰æ–°å­—æ®µ

### Q2ï¼šèˆŠçš„è©•åˆ†è¨˜éŒ„æœƒä¿ç•™å—ï¼Ÿ
**A**ï¼š
- é‡æ–°è©•åˆ†æœƒ**è¦†è“‹**èˆŠçš„è©•åˆ†
- å¦‚æœæƒ³ä¿ç•™èˆŠè©•åˆ†ï¼Œè«‹å…ˆå‚™ä»½ `quality_scores.json`

### Q3ï¼šæ•¸é‡é¡¯ç¤º N/Aï¼Ÿ
**A**ï¼š
- å¯èƒ½åŸå§‹äº¤æ˜“æ•¸æ“šä¸­æ²’æœ‰ `quantity` å­—æ®µ
- æª¢æŸ¥ `data/review_history/bingx/orders/*.json` ä¸­æ˜¯å¦æœ‰ `quantity` å­—æ®µ
- å¦‚æœæ²’æœ‰ï¼Œéœ€è¦é‡æ–°ä¸Šå‚³åŒ…å«å®Œæ•´ä¿¡æ¯çš„äº¤æ˜“è¨˜éŒ„

### Q4ï¼šæ§“æ¡¿é¡¯ç¤º N/Aï¼Ÿ
**A**ï¼š
- å¯èƒ½åŸå§‹äº¤æ˜“æ•¸æ“šä¸­æ²’æœ‰ `leverage` å­—æ®µ
- æª¢æŸ¥åŸå§‹æ•¸æ“šæ˜¯å¦åŒ…å«æ§“æ¡¿ä¿¡æ¯
- ç¾è²¨äº¤æ˜“æ²’æœ‰æ§“æ¡¿ï¼Œæœƒé¡¯ç¤º N/A

### Q5ï¼šç›ˆè™§%é¡¯ç¤º N/Aï¼Ÿ
**A**ï¼š
- å¯èƒ½æ²’æœ‰é€²å ´åƒ¹æˆ–å‡ºå ´åƒ¹
- æª¢æŸ¥ `entry_price` å’Œ `exit_price` æ˜¯å¦æœ‰å€¼
- ç›ˆè™§%æ˜¯è‡ªå‹•è¨ˆç®—çš„ï¼Œä¸éœ€è¦åŸå§‹æ•¸æ“š

---

## æŠ€è¡“ç´°ç¯€

### ä¿®æ”¹çš„ä»£ç¢¼ä½ç½®

**1. é¡¯ç¤ºä»£ç¢¼**ï¼ˆ`web_dashboard_v2.py` ç¬¬ 3547-3595 è¡Œï¼‰
```python
# ç¬¬ä¸€è¡Œï¼šæ·»åŠ æ•¸é‡å’Œæ§“æ¡¿
with info_row1_col3:
    quantity = selected_row.get('quantity', 0)
    if pd.notna(quantity) and quantity > 0:
        st.metric("æ•¸é‡", f"{quantity:.4f}")
    else:
        st.metric("æ•¸é‡", "N/A")

with info_row1_col4:
    leverage = selected_row.get('leverage', 1)
    if pd.notna(leverage) and leverage > 0:
        st.metric("æ§“æ¡¿", f"{leverage:.0f}x")
    else:
        st.metric("æ§“æ¡¿", "N/A")

# ç¬¬äºŒè¡Œï¼šæ·»åŠ ç›ˆè™§%
with info_row2_col2:
    entry_price = selected_row.get('entry_price', 0)
    exit_price = selected_row.get('exit_price', 0)
    if entry_price > 0 and exit_price > 0:
        if selected_row['direction'] == 'Long':
            pnl_pct = ((exit_price - entry_price) / entry_price) * 100
        else:
            pnl_pct = ((entry_price - exit_price) / entry_price) * 100
        st.metric("ç›ˆè™§%", f"{pnl_pct:+.2f}%")
    else:
        st.metric("ç›ˆè™§%", "N/A")
```

**2. ä¿å­˜ä»£ç¢¼**ï¼ˆ`web_dashboard_v2.py` ç¬¬ 3090-3120 è¡Œï¼‰
```python
score_record = {
    # ... å…¶ä»–å­—æ®µ
    'quantity': float(trade.get('quantity', 0)),  # æ–°å¢
    'leverage': float(trade.get('leverage', 1)),  # æ–°å¢
    'fee': float(trade.get('fee', 0)),           # æ–°å¢
    'close_type': str(trade.get('close_type', '')),  # æ–°å¢
    # ... å…¶ä»–å­—æ®µ
}
```

---

## ç›¸é—œæ–‡æª”

- `äº¤æ˜“è©³ç´°ä¿¡æ¯é¡¯ç¤ºå„ªåŒ–èªªæ˜.md` - é¡¯ç¤ºå„ªåŒ–çš„å®Œæ•´èªªæ˜
- `é‡æ–°è©•åˆ†æ“ä½œæŒ‡å—.md` - å¦‚ä½•é‡æ–°è©•åˆ†
- `è©•åˆ†ç³»çµ±v2.1æ›´æ–°èªªæ˜.md` - è©•åˆ†ç³»çµ±æ›´æ–°èªªæ˜

---

## æ›´æ–°æ—¥æœŸ
2026-02-09

## ç‰ˆæœ¬
v2.1.4
