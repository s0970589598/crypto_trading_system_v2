# 盈虧比計算說明

## 📊 什麼是盈虧比？

盈虧比（Risk-Reward Ratio）= 潛在獲利 / 潛在風險

例如：
- 盈虧比 1:2 表示冒 1 元風險，期望賺 2 元
- 盈虧比 1:3 表示冒 1 元風險，期望賺 3 元

## 🎯 系統如何計算盈虧比？

由於 BingX 交易記錄中沒有止損和止盈信息，系統使用智能估算，**按優先級依次嘗試**：

### 方法 1：基於前低/前高（最優先）⭐

這是最實際和專業的方法！

**做多（Long）**：
- 往前看 15 根 15 分鐘 K 線
- 找到最低點作為止損位
- 風險 = 進場價 - 前低
- 盈虧比 = (出場價 - 進場價) / (進場價 - 前低)

**做空（Short）**：
- 往前看 15 根 15 分鐘 K 線
- 找到最高點作為止損位
- 風險 = 前高 - 進場價
- 盈虧比 = (進場價 - 出場價) / (前高 - 進場價)

**為什麼用 15 根 K 線？**
- 15 根 15 分鐘 K 線 = 3.75 小時
- 涵蓋最近的波動區間
- 符合短線交易的時間框架
- 避免止損設置過近或過遠

### 方法 2：基於支撐/阻力位（次優先）

如果無法獲取 15 分鐘數據，使用 1 小時時區的支撐/阻力位：

**做多（Long）**：
- 估算止損位 = 最近的支撐位（基於 50 根 K 線）
- 風險 = 進場價 - 支撐位

**做空（Short）**：
- 估算止損位 = 最近的阻力位（基於 50 根 K 線）
- 風險 = 阻力位 - 進場價

### 方法 3：基於 ATR（最後備用）

如果沒有明顯的支撐/阻力位，使用 **1.5 倍 ATR** 作為止損距離：

**做多（Long）**：
- 估算止損位 = 進場價 - (1.5 × ATR)
- 風險 = 1.5 × ATR

**做空（Short）**：
- 估算止損位 = 進場價 + (1.5 × ATR)
- 風險 = 1.5 × ATR

## 📝 註記中的顯示

```
【交易概況】
• 交易對：eth
• 方向：Long
• 進場時間：2026-01-30 15:30:00
• 出場時間：2026-01-30 18:00:00
• 進場價：2105.30
• 出場價：2110.42
• 估算止損位：2095.00 (基於15分鐘前低)  ← 會標示使用的方法
• 盈虧比：1:2.05 ✅ 優秀
• 持倉時間：2.5 小時
• 盈虧：+25.60 USDT (+0.24%)
• 槓桿：10x
```

可能的標示：
- `(基於15分鐘前低)` - 做多時使用前低
- `(基於15分鐘前高)` - 做空時使用前高
- `(基於支撐位)` - 使用 1h 支撐位
- `(基於阻力位)` - 使用 1h 阻力位
- `(基於1.5 ATR)` - 使用 ATR 倍數

## 🎨 盈虧比評級

| 盈虧比 | 評級 | 圖標 | 說明 |
|--------|------|------|------|
| ≥ 2.0 | 優秀 | ✅ | 風險回報比優秀 |
| 1.0 - 2.0 | 一般 | ⚠️ | 風險回報比一般 |
| < 1.0 | 不佳 | ❌ | 獲利小於風險 |

## 📈 評分影響

### 獲利交易

- **盈虧比 ≥ 3.0**：出場分 +10 分
- **盈虧比 ≥ 2.0**：出場分 +5 分
- **盈虧比 < 1.0**：出場分 -15 分（獲利空間小於風險）

### 虧損交易

- **實際虧損 > 預期風險 × 1.2**：風險分 -20 分（止損執行不當）

## 🔍 計算示例

### 示例 1：做多 ETH（基於前低）⭐ 推薦

```
進場時間：2026-01-30 15:30:00
進場價：2105.30
出場價：2110.42

往前看 15 根 15 分鐘 K 線：
- 最低點（前低）：2095.00

風險 = 2105.30 - 2095.00 = 10.30
獲利 = 2110.42 - 2105.30 = 5.12
盈虧比 = 5.12 / 10.30 = 1:0.50 ❌ 不佳

分析：雖然獲利了，但盈虧比不佳，說明進場點不理想
```

### 示例 2：做空 BTC（基於前高）⭐ 推薦

```
進場價：50000
出場價：49200

往前看 15 根 15 分鐘 K 線：
- 最高點（前高）：50300

風險 = 50300 - 50000 = 300
獲利 = 50000 - 49200 = 800
盈虧比 = 800 / 300 = 1:2.67 ✅ 優秀

分析：優秀的盈虧比，進場點選擇得當
```

### 示例 3：做多 ETH（基於支撐位）

```
進場價：2105.30
出場價：2110.42
支撐位：2090.00（1h 時區）

風險 = 2105.30 - 2090.00 = 15.30
獲利 = 2110.42 - 2105.30 = 5.12
盈虧比 = 5.12 / 15.30 = 1:0.33 ❌ 不佳
```

### 示例 4：做多 BTC（基於 ATR）

```
進場價：50000
出場價：51500
ATR：500

估算止損 = 50000 - (1.5 × 500) = 49250
風險 = 50000 - 49250 = 750
獲利 = 51500 - 50000 = 1500
盈虧比 = 1500 / 750 = 1:2.0 ✅ 優秀
```

## ⚠️ 注意事項

### 1. 優先使用前低/前高方法

- **最實際**：這是專業交易者常用的止損設置方法
- **最合理**：基於實際的市場結構
- **最準確**：反映真實的風險水平

### 2. 為什麼是 15 根 15 分鐘 K 線？

- **時間範圍**：15 × 15 分鐘 = 3.75 小時
- **適合短線**：涵蓋最近的波動區間
- **不會過近**：避免被正常波動掃出
- **不會過遠**：避免承擔過大風險

你可以根據自己的交易風格調整：
- **超短線**：10 根 K 線（2.5 小時）
- **短線**：15 根 K 線（3.75 小時）← 系統默認
- **中線**：20 根 K 線（5 小時）

### 3. 三種方法的優先級

1. **前低/前高**（最優）- 基於實際市場結構
2. **支撐/阻力**（次優）- 基於技術分析
3. **ATR 倍數**（備用）- 基於波動率

### 4. 不同時區的影響

- 系統使用 **15 分鐘時區**找前低/前高
- 如果 15 分鐘數據不足，會降級使用支撐/阻力
- 支撐/阻力基於 **1 小時時區**

## 💡 如何改善盈虧比？

### 1. 使用前低/前高設置止損 ⭐ 推薦

**做多**：
- 找到最近的前低（支撐位）
- 止損設在前低下方一點點（例如 0.5%）
- 這樣止損有明確的技術依據

**做空**：
- 找到最近的前高（阻力位）
- 止損設在前高上方一點點（例如 0.5%）
- 避免被假突破掃出

### 2. 等待好的進場點

- **做多**：等價格回調到支撐位附近（風險小）
- **做空**：等價格反彈到阻力位附近（風險小）
- **不要追高殺跌**：遠離關鍵位置時不進場

### 3. 設置合理的止盈

- 目標至少是風險的 2 倍
- 使用阻力位/支撐位作為目標
- 分批止盈：
  - 50% 在 1:2（保證不虧）
  - 50% 在 1:3 或更高（追求更大利潤）

### 4. 根據市場環境調整

**趨勢市場**：
- 可以設置更大的止盈目標（1:3 或更高）
- 止損可以稍微寬一點

**震盪市場**：
- 止盈目標要保守（1:1.5 到 1:2）
- 止損要緊一點

### 5. 實際操作建議

```
進場前檢查清單：
□ 找到最近的前低/前高
□ 計算風險（進場價 - 止損價）
□ 計算目標（至少 2 倍風險）
□ 確認盈虧比 ≥ 1:2
□ 如果盈虧比不佳，放棄這次機會
```

## 📚 相關資源

- 查看「市場分析」標籤中的支撐/阻力位
- 查看「技術指標」中的 ATR 值
- 參考「多時區分析」確認趨勢

## 🎓 專業建議

### 最低盈虧比標準

- **趨勢交易**：至少 1:2
- **震盪交易**：至少 1:1.5
- **突破交易**：至少 1:3

### 勝率與盈虧比的關係

| 勝率 | 最低盈虧比 | 說明 |
|------|-----------|------|
| 30% | 1:2.5 | 低勝率需要高盈虧比 |
| 40% | 1:1.5 | 平衡型 |
| 50% | 1:1.0 | 高勝率可接受低盈虧比 |
| 60% | 1:0.7 | 高勝率策略 |

**公式**：盈虧比 = (1 - 勝率) / 勝率

例如：勝率 40%，需要盈虧比 = (1 - 0.4) / 0.4 = 1:1.5 才能盈虧平衡

## 🔄 持續改進

1. **記錄實際止損位**：在手動評分時添加註記
2. **分析盈虧比分布**：查看哪些交易盈虧比最好
3. **優化進場點**：提高盈虧比的關鍵
4. **嚴格執行止損**：避免虧損超過預期
